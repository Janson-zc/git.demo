<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetFit - åŒåœºæ™¯èåˆçš„3Dæ•°å­—çŒ«å¥åº·ç®¡ç†ä¸å® ç‰©æ•‘åŠ©é¢†å…»</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        :root {
            --primary-color: #ff9eb5; /* çŒ«çˆªç²‰ */
            --secondary-color: #f0f0f0; /* æµ…ç° */
            --accent-color: #7ec4cf; /* è“ç»¿è‰² */
            --text-color: #333;
            --light-text: #666;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: #f8f9fa;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 450px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow-x: hidden;
        }

        /* é¡µé¢é€šç”¨æ ·å¼ */
        .page {
            display: none;
            padding: 15px;
            min-height: 100vh;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* å¤´éƒ¨æ ·å¼ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-color), #ffb6c1);
            color: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 18px;
        }

        .logo img {
            width: 32px;
            height: 32px;
            margin-right: 8px;
        }

        /* è¿”å›æŒ‰é’® */
        .back-btn {
            position: absolute;
            left: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            z-index: 10;
        }

        .page-title {
            text-align: center;
            flex-grow: 1;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-color);
        }

        .btn-block {
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        /* åº•éƒ¨å¯¼èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            max-width: 450px;
            margin: 0 auto;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 12px;
            color: var(--light-text);
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        /* åŠŸèƒ½ç½‘æ ¼ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .grid-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .grid-item:hover {
            transform: translateY(-5px);
        }

        .grid-icon {
            font-size: 30px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        /* å¼€å‘ä¸­æç¤º */
        .dev-notice {
            text-align: center;
            padding: 40px 20px;
            color: var(--light-text);
        }

        .dev-notice-icon {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        /* ç®¡ç†å‘˜é¢æ¿ */
        .admin-panel {
            margin-top: 20px;
        }

        .stats-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            flex: 1;
            margin: 0 5px;
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .user-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .user-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        /* èŠå¤©ç•Œé¢æ ·å¼ */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 150px);
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 18px;
            word-wrap: break-word;
        }

        .user-message {
            background-color: var(--primary-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .cat-message {
            background-color: #e9ecef;
            color: var(--text-color);
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 16px;
        }

        .send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* çŠ¶æ€å¡ç‰‡æ ·å¼ */
        .status-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .status-card:hover {
            transform: translateY(-3px);
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--light-text);
        }
        
        /* æ•‘åŠ©é¢†å…»é¡µæ ·å¼ */
        .view-toggle {
            display: flex;
            margin-bottom: 15px;
            background-color: #f0f0f0;
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .view-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-option.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .map-container {
            height: 300px;
            background-color: #e9f5e9;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .map-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            transform: translate(-50%, -50%);
        }
        
        .rescue-marker {
            background-color: #28a745; /* ç»¿è‰² */
        }
        
        .hospital-marker {
            background-color: #dc3545; /* çº¢è‰² */
        }
        
        .location-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .location-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .location-item:last-child {
            border-bottom: none;
        }
        
        .location-info {
            flex: 1;
        }
        
        .location-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .location-details {
            font-size: 14px;
            color: var(--light-text);
        }
        
        .location-distance {
            text-align: right;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .location-count {
            font-size: 12px;
            color: #28a745;
            margin-top: 5px;
        }
        
        /* AIè¯†ç—…é¡µæ ·å¼ */
        .ai-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .ai-option {
            flex: 1;
            text-align: center;
            padding: 20px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .ai-option:hover {
            transform: translateY(-5px);
        }
        
        .ai-icon {
            font-size: 40px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .free-note {
            text-align: center;
            color: var(--light-text);
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
        }
        
        .upload-icon {
            font-size: 50px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
            margin: 0 auto 20px;
            display: none;
        }
        
        .analysis-result {
            display: none;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 20px;
        }
        
        .analysis-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .disease-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .disease-item:last-child {
            border-bottom: none;
        }
        
        .disease-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .disease-probability {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .probability-bar {
            flex: 1;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 0 10px;
        }
        
        .probability-fill {
            height: 100%;
            background-color: var(--primary-color);
        }
        
        .probability-text {
            font-size: 14px;
            color: var(--light-text);
            min-width: 40px;
        }
        
        .disease-suggestion {
            font-size: 14px;
            color: var(--light-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ç™»å½•é¡µé¢ -->
        <div id="login-page" class="page active">
            <div class="header">
                <div class="logo">
                    <span>ğŸ±</span>
                    <span>PetFit</span>
                </div>
            </div>
            
            <div style="padding: 30px 20px;">
                <h2 style="text-align: center; margin-bottom: 30px;">æ¬¢è¿æ¥åˆ°PetFit</h2>
                <p style="text-align: center; margin-bottom: 30px; color: var(--light-text);">æ—¢èƒ½é™ªå–µå¥åº·ï¼Œä¹Ÿèƒ½åŠ©ä½ æˆé•¿</p>
                
                <div class="form-group">
                    <input type="text" id="login-username" class="form-control" placeholder="ç”¨æˆ·å">
                </div>
                <div class="form-group">
                    <input type="password" id="login-password" class="form-control" placeholder="å¯†ç ">
                </div>
                
                <button id="login-btn" class="btn btn-primary btn-block">ç™»å½•</button>
                <button id="register-btn" class="btn btn-secondary btn-block">æ³¨å†Œæ–°è´¦å·</button>
                
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" id="admin-link" style="color: var(--light-text); font-size: 14px;">ç®¡ç†å‘˜å…¥å£</a>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜å¯†ç éªŒè¯é¡µé¢ -->
        <div id="admin-auth-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="login">â†</button>
                <div class="page-title">ç®¡ç†å‘˜éªŒè¯</div>
            </div>
            
            <div style="padding: 30px 20px;">
                <h2 style="text-align: center; margin-bottom: 30px;">ç®¡ç†å‘˜èº«ä»½éªŒè¯</h2>
                <p style="text-align: center; margin-bottom: 30px; color: var(--light-text);">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç </p>
                
                <div class="form-group">
                    <input type="password" id="admin-password" class="form-control" placeholder="ç®¡ç†å‘˜å¯†ç ">
                </div>
                
                <button id="admin-login-btn" class="btn btn-primary btn-block">éªŒè¯</button>
                <button id="back-to-login-from-auth" class="btn btn-secondary btn-block">è¿”å›ç™»å½•</button>
            </div>
        </div>

        <!-- æ³¨å†Œé¡µé¢ -->
        <div id="register-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="login">â†</button>
                <div class="page-title">æ³¨å†Œè´¦å·</div>
            </div>
            
            <div style="padding: 30px 20px;">
                <h2 style="text-align: center; margin-bottom: 30px;">åˆ›å»ºæ–°è´¦å·</h2>
                
                <div class="form-group">
                    <input type="text" id="reg-username" class="form-control" placeholder="ç”¨æˆ·å">
                </div>
                <div class="form-group">
                    <input type="email" id="reg-email" class="form-control" placeholder="é‚®ç®±">
                </div>
                <div class="form-group">
                    <input type="password" id="reg-password" class="form-control" placeholder="å¯†ç ">
                </div>
                <div class="form-group">
                    <input type="password" id="reg-confirm-password" class="form-control" placeholder="ç¡®è®¤å¯†ç ">
                </div>
                
                <button id="complete-register-btn" class="btn btn-primary btn-block">æ³¨å†Œ</button>
                <button id="back-to-login-btn" class="btn btn-secondary btn-block">è¿”å›ç™»å½•</button>
            </div>
        </div>

        <!-- é¦–é¡µ -->
        <div id="home-page" class="page">
            <div class="header">
                <div class="logo">
                    <span>ğŸ±</span>
                    <span>PetFit</span>
                </div>
                <div id="user-info">
                    <span id="username-display"></span>
                </div>
            </div>
            
            <div style="padding: 15px;">
                <!-- ç”¨æˆ·çŠ¶æ€å¡ç‰‡ -->
                <div class="status-card" id="status-card">
                    <h3 style="margin-bottom: 15px;">ä»Šæ—¥çŠ¶æ€</h3>
                    <div style="display: flex; justify-content: space-between;">
                        <div style="text-align: center;">
                            <div style="font-size: 24px; color: var(--primary-color);">ğŸ”¥</div>
                            <div style="font-size: 12px;">å¡è·¯é‡Œ</div>
                            <div style="font-weight: bold;">1200/1500</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; color: var(--accent-color);">ğŸ˜´</div>
                            <div style="font-size: 12px;">ç¡çœ </div>
                            <div style="font-weight: bold;">7h 30m</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 24px; color: var(--primary-color);">â¤ï¸</div>
                            <div style="font-size: 12px;">äº²å¯†å€¼</div>
                            <div style="font-weight: bold;">85</div>
                        </div>
                    </div>
                </div>
                
                <!-- 3DçŒ«å’ªåŒºåŸŸ -->
                <div class="card" style="text-align: center; padding: 30px 15px;">
                    <div style="font-size: 60px; margin-bottom: 15px;">ğŸ±</div>
                    <p style="color: var(--light-text);">ç‚¹å‡»ä¸æ•°å­—å–µäº’åŠ¨</p>
                </div>
                
                <!-- åŠŸèƒ½ç½‘æ ¼ -->
                <div class="grid-container">
                    <div class="grid-item" data-page="cat-health">
                        <div class="grid-icon">ğŸ½ï¸</div>
                        <div>çŒ«å’ªé¥®é£Ÿ</div>
                    </div>
                    <div class="grid-item" data-page="user-health">
                        <div class="grid-icon">ğŸƒ</div>
                        <div>ç”¨æˆ·å¥åº·</div>
                    </div>
                    <div class="grid-item" data-page="lbs-service">
                        <div class="grid-icon">ğŸ¥</div>
                        <div>é™„è¿‘æœåŠ¡</div>
                    </div>
                    <div class="grid-item" data-page="donation">
                        <div class="grid-icon">â¤ï¸</div>
                        <div>çˆ±å¿ƒæèµ </div>
                    </div>
                    <div class="grid-item" data-page="cat-profile">
                        <div class="grid-icon">ğŸ“‹</div>
                        <div>çŒ«å’ªæ¡£æ¡ˆ</div>
                    </div>
                    <div class="grid-item" data-page="chat">
                        <div class="grid-icon">ğŸ’¬</div>
                        <div>èŠå¤©äº’åŠ¨</div>
                    </div>
                    <!-- æ–°å¢çš„ä¸¤ä¸ªåŠŸèƒ½å…¥å£ -->
                    <div class="grid-item" data-page="rescue-adoption">
                        <div class="grid-icon">ğŸ </div>
                        <div>æ•‘åŠ©é¢†å…»</div>
                    </div>
                    <div class="grid-item" data-page="ai-disease">
                        <div class="grid-icon">ğŸ”¬</div>
                        <div>AIè¯†ç—…</div>
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨å¯¼èˆª -->
            <div class="bottom-nav">
                <div class="nav-item active" data-page="home">
                    <div class="nav-icon">ğŸ </div>
                    <div>é¦–é¡µ</div>
                </div>
                <div class="nav-item" data-page="cat-health">
                    <div class="nav-icon">ğŸ±</div>
                    <div>çŒ«å’ªå¥åº·</div>
                </div>
                <div class="nav-item" data-page="user-health">
                    <div class="nav-icon">ğŸ‘¤</div>
                    <div>ç”¨æˆ·å¥åº·</div>
                </div>
                <div class="nav-item" data-page="lbs-service">
                    <div class="nav-icon">ğŸ—ºï¸</div>
                    <div>é™„è¿‘æœåŠ¡</div>
                </div>
                <div class="nav-item" data-page="profile">
                    <div class="nav-icon">ğŸ‘¤</div>
                    <div>æˆ‘çš„</div>
                </div>
            </div>
        </div>

        <!-- çŒ«å’ªå¥åº·é¡µé¢ -->
        <div id="cat-health-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">çŒ«å’ªå¥åº·</div>
            </div>
            
            <div class="dev-notice">
                <div class="dev-notice-icon">ğŸ”§</div>
                <h3>åŠŸèƒ½å¼€å‘ä¸­</h3>
                <p>çŒ«å’ªå¥åº·ç®¡ç†åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>

        <!-- ç”¨æˆ·å¥åº·é¡µé¢ -->
        <div id="user-health-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">ç”¨æˆ·å¥åº·</div>
            </div>
            
            <div class="dev-notice">
                <div class="dev-notice-icon">ğŸ”§</div>
                <h3>åŠŸèƒ½å¼€å‘ä¸­</h3>
                <p>ç”¨æˆ·å¥åº·ç®¡ç†åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>

        <!-- é™„è¿‘æœåŠ¡é¡µé¢ -->
        <div id="lbs-service-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">é™„è¿‘æœåŠ¡</div>
            </div>
            
            <div class="dev-notice">
                <div class="dev-notice-icon">ğŸ”§</div>
                <h3>åŠŸèƒ½å¼€å‘ä¸­</h3>
                <p>LBSæœåŠ¡åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>

        <!-- çˆ±å¿ƒæèµ é¡µé¢ -->
        <div id="donation-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">çˆ±å¿ƒæèµ </div>
            </div>
            
            <div class="dev-notice">
                <div class="dev-notice-icon">ğŸ”§</div>
                <h3>åŠŸèƒ½å¼€å‘ä¸­</h3>
                <p>çˆ±å¿ƒæèµ åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>

        <!-- çŒ«å’ªæ¡£æ¡ˆé¡µé¢ -->
        <div id="cat-profile-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">çŒ«å’ªæ¡£æ¡ˆ</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="card">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 60px; margin-right: 15px;">ğŸ±</div>
                        <div>
                            <div style="font-weight: bold; font-size: 20px;">å’ªå’ª</div>
                            <div style="font-size: 14px; color: var(--light-text);">è‹±å›½çŸ­æ¯›çŒ« Â· 2å²</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">4.2kg</div>
                            <div style="font-size: 12px; color: var(--light-text);">ä½“é‡</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">85%</div>
                            <div style="font-size: 12px; color: var(--light-text);">å¥åº·åº¦</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">â¤ï¸ 92</div>
                            <div style="font-size: 12px; color: var(--light-text);">äº²å¯†å€¼</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 15px;">å¥åº·è®°å½•</h3>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>ç–«è‹—çŠ¶æ€</span>
                            <span style="color: #28a745;">å·²å®Œæˆ</span>
                        </div>
                        <div style="font-size: 12px; color: var(--light-text);">ä¸‹æ¬¡æ¥ç§: 2024å¹´6æœˆ15æ—¥</div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>é©±è™«è®°å½•</span>
                            <span style="color: #28a745;">å·²å®Œæˆ</span>
                        </div>
                        <div style="font-size: 12px; color: var(--light-text);">ä¸‹æ¬¡é©±è™«: 2024å¹´4æœˆ20æ—¥</div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>ä½“æ£€è®°å½•</span>
                            <span style="color: #ffc107;">å¾…å®‰æ’</span>
                        </div>
                        <div style="font-size: 12px; color: var(--light-text);">å»ºè®®æ¯å¹´ä¸€æ¬¡å…¨é¢ä½“æ£€</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 15px;">é¥®é£Ÿåå¥½</h3>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>ä¸»é£Ÿ</span>
                            <span>çš‡å®¶å®¤å†…æˆçŒ«ç²®</span>
                        </div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>é›¶é£Ÿ</span>
                            <span>é¸¡èƒ¸è‚‰ã€çŒ«æ¡</span>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>è¿‡æ•é£Ÿç‰©</span>
                            <span style="color: #dc3545;">æµ·é²œ</span>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-block">ç¼–è¾‘æ¡£æ¡ˆ</button>
            </div>
        </div>

        <!-- èŠå¤©äº’åŠ¨é¡µé¢ -->
        <div id="chat-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">èŠå¤©äº’åŠ¨</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="chat-container">
                    <div class="messages-container" id="messages-container">
                        <div class="message cat-message">
                            <strong>PetFitåŠ©æ‰‹:</strong> ä½ å¥½ï¼æˆ‘æ˜¯PetFitåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
                        </div>
                        <div class="message user-message">
                            æˆ‘çš„çŒ«å’ªæœ€è¿‘æ‰“å–·åšï¼Œæ€ä¹ˆåŠï¼Ÿ
                        </div>
                        <div class="message cat-message">
                            <strong>PetFitåŠ©æ‰‹:</strong> çŒ«å’ªæ‰“å–·åšå¯èƒ½æ˜¯æ„Ÿå†’æˆ–è¿‡æ•ã€‚å»ºè®®è§‚å¯Ÿæ˜¯å¦æœ‰é¼»æ¶•ã€å‘çƒ­ç­‰ç—‡çŠ¶ã€‚å¯ä»¥å°è¯•ç”¨æ¸©æ¯›å·¾è½»è½»æ“¦æ‹­é¼»å­ï¼Œä¿æŒç¯å¢ƒæ¸…æ´ã€‚å¦‚æœæŒç»­ä¸è§å¥½è½¬ï¼Œå»ºè®®å’¨è¯¢å…½åŒ»ã€‚
                        </div>
                        <div class="message user-message">
                            é™„è¿‘æœ‰æ¨èçš„å® ç‰©åŒ»é™¢å—ï¼Ÿ
                        </div>
                        <div class="message cat-message">
                            <strong>PetFitåŠ©æ‰‹:</strong> ä½ å¯ä»¥ç‚¹å‡»ä¸‹æ–¹"é™„è¿‘æœåŠ¡"æŸ¥çœ‹é™„è¿‘çš„å® ç‰©åŒ»é™¢ã€‚æˆ‘ä»¬å·²ä¸åˆä½œåŒ»é™¢å»ºç«‹è”ç³»ï¼Œå¯ä»¥æä¾›å¯¼èˆªå’Œé¢„çº¦æœåŠ¡ã€‚
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯...">
                        <button class="send-btn" id="send-btn">â¤</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
        <div id="profile-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">ä¸ªäººä¸­å¿ƒ</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="card">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 40px; margin-right: 15px;">ğŸ‘¤</div>
                        <div>
                            <div style="font-weight: bold;" id="profile-username"></div>
                            <div style="font-size: 12px; color: var(--light-text);" id="profile-email"></div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <div style="text-align: center; cursor: pointer;" class="profile-stat" data-type="rescue">
                            <div style="font-weight: bold;">5</div>
                            <div style="font-size: 12px; color: var(--light-text);">æ•‘åŠ©è®°å½•</div>
                        </div>
                        <div style="text-align: center; cursor: pointer;" class="profile-stat" data-type="adoption">
                            <div style="font-weight: bold;">3</div>
                            <div style="font-size: 12px; color: var(--light-text);">é¢†å…»ç”³è¯·</div>
                        </div>
                        <div style="text-align: center; cursor: pointer;" class="profile-stat" data-type="coins">
                            <div style="font-weight: bold;">120</div>
                            <div style="font-size: 12px; color: var(--light-text);">çŒ«å¸</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 15px;">æˆ‘çš„å¾½ç« </h3>
                    <div style="display: flex; justify-content: space-around;">
                        <div style="text-align: center;">
                            <div style="font-size: 30px; color: gold;">ğŸ†</div>
                            <div style="font-size: 12px;">è¥å…»è¾¾äºº</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 30px; color: silver;">â­</div>
                            <div style="font-size: 12px;">çˆ±å¿ƒå¤§ä½¿</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 30px; color: #cd7f32;">â¤ï¸</div>
                            <div style="font-size: 12px;">æ•‘åŠ©å…ˆé”‹</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 15px;">è®¾ç½®</h3>
                    <div style="margin-bottom: 10px;">
                        <button class="btn btn-secondary profile-setting" data-type="edit" style="width: 100%;">ç¼–è¾‘ä¸ªäººä¿¡æ¯</button>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <button class="btn btn-secondary profile-setting" data-type="notification" style="width: 100%;">é€šçŸ¥è®¾ç½®</button>
                    </div>
                    <div>
                        <button id="logout-btn" class="btn btn-primary" style="width: 100%;">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜é¡µé¢ -->
        <div id="admin-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="admin-auth">â†</button>
                <div class="page-title">ç®¡ç†å‘˜é¢æ¿</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="admin-panel">
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="stat-number" id="total-users">0</div>
                            <div>æ³¨å†Œç”¨æˆ·</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="active-users">0</div>
                            <div>æ´»è·ƒç”¨æˆ·</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="margin-bottom: 15px;">ç”¨æˆ·åˆ—è¡¨</h3>
                        <div class="user-list" id="user-list">
                            <!-- ç”¨æˆ·åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <button id="back-to-login-from-admin" class="btn btn-primary btn-block">è¿”å›ç™»å½•</button>
                </div>
            </div>
        </div>
        
        <!-- æ•‘åŠ©é¢†å…»é¡µé¢ -->
        <div id="rescue-adoption-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">æ•‘åŠ©é¢†å…»</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="view-toggle">
                    <div class="view-option active" data-view="map">åœ°å›¾æ¨¡å¼</div>
                    <div class="view-option" data-view="list">åˆ—è¡¨æ¨¡å¼</div>
                </div>
                
                <!-- åœ°å›¾æ¨¡å¼ -->
                <div id="map-view" class="view-content">
                    <div class="map-container">
                        <!-- æ¨¡æ‹Ÿåœ°å›¾ä¸Šçš„æ ‡è®° -->
                        <div class="map-marker rescue-marker" style="top: 30%; left: 40%;">ğŸ </div>
                        <div class="map-marker rescue-marker" style="top: 60%; left: 60%;">ğŸ </div>
                        <div class="map-marker hospital-marker" style="top: 45%; left: 30%;">ğŸ¥</div>
                        <div class="map-marker hospital-marker" style="top: 70%; left: 50%;">ğŸ¥</div>
                        <div class="map-marker rescue-marker" style="top: 25%; left: 70%;">ğŸ </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="margin-bottom: 15px;">å›¾ä¾‹è¯´æ˜</h3>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div class="map-marker rescue-marker" style="position: static; transform: none; margin-right: 10px;">ğŸ </div>
                            <div>æ•‘åŠ©ç«™/é¢†å…»ä¸­å¿ƒ</div>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <div class="map-marker hospital-marker" style="position: static; transform: none; margin-right: 10px;">ğŸ¥</div>
                            <div>å® ç‰©åŒ»é™¢</div>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ—è¡¨æ¨¡å¼ -->
                <div id="list-view" class="view-content" style="display: none;">
                    <div class="location-list">
                        <div class="location-item">
                            <div class="location-info">
                                <div class="location-name">çˆ±å¿ƒå® ç‰©æ•‘åŠ©ä¸­å¿ƒ</div>
                                <div class="location-details">æä¾›æµæµªçŒ«æ•‘åŠ©å’Œé¢†å…»æœåŠ¡</div>
                                <div class="location-count">å¯é¢†å…»: 5åª</div>
                            </div>
                            <div class="location-distance">1.2km</div>
                        </div>
                        <div class="location-item">
                            <div class="location-info">
                                <div class="location-name">é˜³å…‰å® ç‰©åŒ»é™¢</div>
                                <div class="location-details">24å°æ—¶æ€¥è¯Šï¼Œä¸“ä¸šå® ç‰©åŒ»ç–—</div>
                            </div>
                            <div class="location-distance">0.8km</div>
                        </div>
                        <div class="location-item">
                            <div class="location-info">
                                <div class="location-name">æµæµªçŒ«å¤©ä½¿ä¹‹å®¶</div>
                                <div class="location-details">ä¸“æ³¨æµæµªçŒ«æ•‘åŠ©å’Œé¢†å…»</div>
                                <div class="location-count">å¯é¢†å…»: 3åª</div>
                            </div>
                            <div class="location-distance">2.1km</div>
                        </div>
                        <div class="location-item">
                            <div class="location-info">
                                <div class="location-name">åº·è´å® ç‰©è¯Šæ‰€</div>
                                <div class="location-details">ä¸“ä¸šçŒ«å’ªè¯Šç–—ï¼Œç–«è‹—æ¥ç§</div>
                            </div>
                            <div class="location-distance">1.5km</div>
                        </div>
                        <div class="location-item">
                            <div class="location-info">
                                <div class="location-name">å°åŠ¨ç‰©ä¿æŠ¤åä¼š</div>
                                <div class="location-details">æµæµªåŠ¨ç‰©æ•‘åŠ©å’Œé¢†å…»æœåŠ¡</div>
                                <div class="location-count">å¯é¢†å…»: 8åª</div>
                            </div>
                            <div class="location-distance">3.2km</div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-block" style="margin-top: 20px;">ä¸€é”®æ±‚åŠ©</button>
            </div>
        </div>
        
        <!-- AIè¯†ç—…é¡µé¢ -->
        <div id="ai-disease-page" class="page">
            <div class="header">
                <button class="back-btn" data-target="home">â†</button>
                <div class="page-title">AIè¯†ç—…</div>
            </div>
            
            <div style="padding: 15px;">
                <div class="card">
                    <h3 style="margin-bottom: 15px;">çŒ«å’ªå¥åº·è¯†åˆ«</h3>
                    <p style="color: var(--light-text); margin-bottom: 20px;">ä¸Šä¼ çŒ«å’ªç…§ç‰‡ï¼ŒAIå°†å¸®åŠ©è¯†åˆ«å¯èƒ½çš„å¥åº·é—®é¢˜</p>
                    
                    <div class="ai-options">
                        <div class="ai-option" id="camera-option">
                            <div class="ai-icon">ğŸ“·</div>
                            <div>æ‹ç…§è¯†åˆ«</div>
                        </div>
                        <div class="ai-option" id="upload-option">
                            <div class="ai-icon">ğŸ“</div>
                            <div>ä¸Šä¼ å›¾ç‰‡</div>
                        </div>
                    </div>
                    
                    <div class="free-note">æ¯æœˆ3æ¬¡å…è´¹è¯†åˆ«</div>
                    
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">ğŸ“</div>
                        <div>ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</div>
                        <div style="font-size: 12px; color: var(--light-text); margin-top: 10px;">æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæœ€å¤§ 5MB</div>
                    </div>
                    
                    <input type="file" id="image-input" accept="image/*" style="display: none;">
                    
                    <img id="image-preview" class="image-preview" alt="é¢„è§ˆå›¾ç‰‡">
                    
                    <button id="analyze-btn" class="btn btn-primary btn-block" style="display: none;">å¼€å§‹åˆ†æ</button>
                    
                    <div id="analysis-result" class="analysis-result">
                        <div class="analysis-title">AIè¯†åˆ«ç»“æœ</div>
                        <div class="disease-item">
                            <div class="disease-name">çŒ«è—“</div>
                            <div class="disease-probability">
                                <span>å¯èƒ½æ€§</span>
                                <div class="probability-bar">
                                    <div class="probability-fill" style="width: 78%;"></div>
                                </div>
                                <span class="probability-text">78%</span>
                            </div>
                            <div class="disease-suggestion">å»ºè®®ï¼šä¿æŒç¯å¢ƒå¹²ç‡¥æ¸…æ´ï¼Œä½¿ç”¨æŠ—çœŸèŒè¯ç‰©ï¼Œéš”ç¦»æ‚£ç—…çŒ«å’ª</div>
                        </div>
                        <div class="disease-item">
                            <div class="disease-name">è¿‡æ•æ€§çš®ç‚</div>
                            <div class="disease-probability">
                                <span>å¯èƒ½æ€§</span>
                                <div class="probability-bar">
                                    <div class="probability-fill" style="width: 45%;"></div>
                                </div>
                                <span class="probability-text">45%</span>
                            </div>
                            <div class="disease-suggestion">å»ºè®®ï¼šæ’æŸ¥è¿‡æ•åŸï¼Œé¿å…æ¥è§¦å¯èƒ½å¼•èµ·è¿‡æ•çš„ç‰©è´¨</div>
                        </div>
                        <div class="disease-item">
                            <div class="disease-name">è·³èš¤è¿‡æ•</div>
                            <div class="disease-probability">
                                <span>å¯èƒ½æ€§</span>
                                <div class="probability-bar">
                                    <div class="probability-fill" style="width: 30%;"></div>
                                </div>
                                <span class="probability-text">30%</span>
                            </div>
                            <div class="disease-suggestion">å»ºè®®ï¼šå®šæœŸé©±è™«ï¼Œæ¸…æ´ç¯å¢ƒï¼Œä½¿ç”¨è·³èš¤é¢„é˜²äº§å“</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼€å‘ä¸­æç¤ºæ¨¡æ€æ¡† -->
    <div id="dev-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">åŠŸèƒ½å¼€å‘ä¸­</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="dev-notice">
                <div class="dev-notice-icon">ğŸ”§</div>
                <h3>åŠŸèƒ½å¼€å‘ä¸­</h3>
                <p id="dev-modal-text">æ­¤åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
            <button id="close-dev-modal" class="btn btn-primary btn-block">ç¡®å®š</button>
        </div>
    </div>

    <script>
        // ç”¨æˆ·æ•°æ®ç®¡ç†
        class UserManager {
            constructor() {
                this.users = JSON.parse(localStorage.getItem('petfitUsers')) || [];
                this.currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
                this.loginHistory = JSON.parse(localStorage.getItem('loginHistory')) || [];
                this.adminPassword = "admin123"; // ç®¡ç†å‘˜å¯†ç 
            }
            
            // æ³¨å†Œç”¨æˆ·
            register(username, email, password) {
                // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
                if (this.users.find(user => user.username === username)) {
                    return { success: false, message: 'ç”¨æˆ·åå·²å­˜åœ¨' };
                }
                
                // åˆ›å»ºæ–°ç”¨æˆ·
                const newUser = {
                    id: Date.now().toString(),
                    username,
                    email,
                    password, // æ³¨æ„ï¼šå®é™…åº”ç”¨ä¸­åº”å¯¹å¯†ç è¿›è¡Œå“ˆå¸Œå¤„ç†
                    registerDate: new Date().toISOString(),
                    lastLogin: null
                };
                
                this.users.push(newUser);
                this.saveUsers();
                
                return { success: true, message: 'æ³¨å†ŒæˆåŠŸ' };
            }
            
            // ç”¨æˆ·ç™»å½•
            login(username, password) {
                const user = this.users.find(u => u.username === username && u.password === password);
                
                if (user) {
                    user.lastLogin = new Date().toISOString();
                    this.currentUser = user;
                    this.saveUsers();
                    this.saveCurrentUser();
                    
                    // è®°å½•ç™»å½•å†å²
                    this.loginHistory.push({
                        username,
                        loginTime: new Date().toISOString()
                    });
                    localStorage.setItem('loginHistory', JSON.stringify(this.loginHistory));
                    
                    return { success: true, message: 'ç™»å½•æˆåŠŸ', user };
                } else {
                    return { success: false, message: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' };
                }
            }
            
            // ç®¡ç†å‘˜ç™»å½•
            adminLogin(password) {
                if (password === this.adminPassword) {
                    return { success: true, message: 'ç®¡ç†å‘˜ç™»å½•æˆåŠŸ' };
                } else {
                    return { success: false, message: 'ç®¡ç†å‘˜å¯†ç é”™è¯¯' };
                }
            }
            
            // ç”¨æˆ·ç™»å‡º
            logout() {
                this.currentUser = null;
                localStorage.removeItem('currentUser');
            }
            
            // è·å–æ‰€æœ‰ç”¨æˆ·
            getAllUsers() {
                return this.users;
            }
            
            // è·å–æ´»è·ƒç”¨æˆ·æ•°ï¼ˆæœ€è¿‘7å¤©ç™»å½•è¿‡çš„ç”¨æˆ·ï¼‰
            getActiveUsersCount() {
                const sevenDaysAgo = new Date();
                sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
                
                return this.users.filter(user => {
                    if (!user.lastLogin) return false;
                    return new Date(user.lastLogin) > sevenDaysAgo;
                }).length;
            }
            
            // ä¿å­˜ç”¨æˆ·æ•°æ®åˆ°localStorage
            saveUsers() {
                localStorage.setItem('petfitUsers', JSON.stringify(this.users));
            }
            
            // ä¿å­˜å½“å‰ç”¨æˆ·åˆ°localStorage
            saveCurrentUser() {
                localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            }
        }

        // é¡µé¢ç®¡ç†å™¨
        class PageManager {
            constructor() {
                this.pages = document.querySelectorAll('.page');
                this.navItems = document.querySelectorAll('.nav-item');
                this.gridItems = document.querySelectorAll('.grid-item');
                this.backButtons = document.querySelectorAll('.back-btn');
                
                this.initEventListeners();
            }
            
            // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
            showPage(pageId) {
                // éšè—æ‰€æœ‰é¡µé¢
                this.pages.forEach(page => {
                    page.classList.remove('active');
                });
                
                // æ˜¾ç¤ºç›®æ ‡é¡µé¢
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                }
                
                // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
                this.updateNavActiveState(pageId);
            }
            
            // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
            updateNavActiveState(pageId) {
                this.navItems.forEach(item => {
                    item.classList.remove('active');
                    
                    const dataPage = item.getAttribute('data-page');
                    if (dataPage && pageId === `${dataPage}-page`) {
                        item.classList.add('active');
                    }
                });
            }
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initEventListeners() {
                // å¯¼èˆªé¡¹ç‚¹å‡»äº‹ä»¶
                this.navItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const pageId = item.getAttribute('data-page') + '-page';
                        this.showPage(pageId);
                    });
                });
                
                // ç½‘æ ¼é¡¹ç‚¹å‡»äº‹ä»¶
                this.gridItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const pageId = item.getAttribute('data-page') + '-page';
                        this.showPage(pageId);
                    });
                });
                
                // è¿”å›æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                this.backButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const targetPage = button.getAttribute('data-target') + '-page';
                        this.showPage(targetPage);
                    });
                });
            }
        }

        // èŠå¤©åŠŸèƒ½
        class ChatManager {
            constructor() {
                this.messagesContainer = document.getElementById('messages-container');
                this.chatInput = document.getElementById('chat-input');
                this.sendBtn = document.getElementById('send-btn');
                
                this.initEventListeners();
            }
            
            initEventListeners() {
                this.sendBtn.addEventListener('click', () => {
                    this.sendMessage();
                });
                
                this.chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });
            }
            
            sendMessage() {
                const message = this.chatInput.value.trim();
                if (message === '') return;
                
                // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                this.addMessage(message, 'user');
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                this.chatInput.value = '';
                
                // æ¨¡æ‹ŸAIå›å¤
                setTimeout(() => {
                    this.addMessage(this.generateResponse(message), 'cat');
                }, 1000);
            }
            
            addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message`;
                
                if (sender === 'cat') {
                    messageDiv.innerHTML = `<strong>PetFitåŠ©æ‰‹:</strong> ${text}`;
                } else {
                    messageDiv.textContent = text;
                }
                
                this.messagesContainer.appendChild(messageDiv);
                
                // æ»šåŠ¨åˆ°åº•éƒ¨
                this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }
            
            generateResponse(userMessage) {
                const responses = {
                    'hello': 'ä½ å¥½ï¼æˆ‘æ˜¯PetFitåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ',
                    'hi': 'ä½ å¥½ï¼æˆ‘æ˜¯PetFitåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ',
                    'ä½ å¥½': 'ä½ å¥½ï¼æˆ‘æ˜¯PetFitåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ',
                    'çŒ«å’ª': 'å…³äºçŒ«å’ªçš„é—®é¢˜ï¼Œæˆ‘å¯ä»¥å¸®ä½ è§£ç­”å¥åº·ã€é¥®é£Ÿã€è¡Œä¸ºç­‰æ–¹é¢çš„é—®é¢˜ã€‚',
                    'å¥åº·': 'çŒ«å’ªå¥åº·ç®¡ç†æ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œä½ å¯ä»¥åœ¨"çŒ«å’ªå¥åº·"é¡µé¢è®°å½•å’ŒæŸ¥çœ‹ç›¸å…³ä¿¡æ¯ã€‚',
                    'é¥®é£Ÿ': 'åˆç†çš„é¥®é£Ÿå¯¹çŒ«å’ªå¥åº·å¾ˆé‡è¦ï¼Œä½ å¯ä»¥åœ¨"çŒ«å’ªé¥®é£Ÿ"é¡µé¢è®°å½•å’Œåˆ†æçŒ«å’ªçš„é¥®é£Ÿæƒ…å†µã€‚',
                    'åŒ»é™¢': 'ä½ å¯ä»¥åœ¨"é™„è¿‘æœåŠ¡"é¡µé¢æŸ¥æ‰¾é™„è¿‘çš„å® ç‰©åŒ»é™¢å’Œè¯Šæ‰€ã€‚',
                    'æ•‘åŠ©': 'æˆ‘ä»¬ä¸å¤šå®¶æ•‘åŠ©ç«™åˆä½œï¼Œä½ å¯ä»¥åœ¨"çˆ±å¿ƒæèµ "é¡µé¢äº†è§£æ›´å¤šä¿¡æ¯ã€‚',
                    'default': 'æˆ‘ç†è§£ä½ çš„é—®é¢˜ï¼Œä½†ä½œä¸ºæ¼”ç¤ºç‰ˆæœ¬ï¼Œæˆ‘çš„å›ç­”æœ‰é™ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä¼šæä¾›æ›´ä¸“ä¸šçš„å»ºè®®ã€‚'
                };
                
                userMessage = userMessage.toLowerCase();
                
                for (const [keyword, response] of Object.entries(responses)) {
                    if (userMessage.includes(keyword)) {
                        return response;
                    }
                }
                
                return responses.default;
            }
        }

        // æ¨¡æ€æ¡†ç®¡ç†å™¨
        class ModalManager {
            constructor() {
                this.modal = document.getElementById('dev-modal');
                this.closeModalBtn = document.getElementById('close-dev-modal');
                this.closeModalX = document.querySelector('.close-modal');
                this.modalText = document.getElementById('dev-modal-text');
                
                this.initEventListeners();
            }
            
            initEventListeners() {
                this.closeModalBtn.addEventListener('click', () => {
                    this.hideModal();
                });
                
                this.closeModalX.addEventListener('click', () => {
                    this.hideModal();
                });
                
                // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
                window.addEventListener('click', (e) => {
                    if (e.target === this.modal) {
                        this.hideModal();
                    }
                });
            }
            
            showModal(text = 'æ­¤åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼') {
                this.modalText.textContent = text;
                this.modal.style.display = 'flex';
            }
            
            hideModal() {
                this.modal.style.display = 'none';
            }
        }

        // æ•‘åŠ©é¢†å…»é¡µåŠŸèƒ½
        class RescueAdoptionManager {
            constructor() {
                this.viewOptions = document.querySelectorAll('.view-option');
                this.mapView = document.getElementById('map-view');
                this.listView = document.getElementById('list-view');
                
                this.initEventListeners();
            }
            
            initEventListeners() {
                this.viewOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        // æ›´æ–°é€‰é¡¹çŠ¶æ€
                        this.viewOptions.forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                        
                        // åˆ‡æ¢è§†å›¾
                        const view = option.getAttribute('data-view');
                        if (view === 'map') {
                            this.mapView.style.display = 'block';
                            this.listView.style.display = 'none';
                        } else {
                            this.mapView.style.display = 'none';
                            this.listView.style.display = 'block';
                        }
                    });
                });
            }
        }

        // AIè¯†ç—…é¡µåŠŸèƒ½
        class AIDiseaseManager {
            constructor() {
                this.cameraOption = document.getElementById('camera-option');
                this.uploadOption = document.getElementById('upload-option');
                this.uploadArea = document.getElementById('upload-area');
                this.imageInput = document.getElementById('image-input');
                this.imagePreview = document.getElementById('image-preview');
                this.analyzeBtn = document.getElementById('analyze-btn');
                this.analysisResult = document.getElementById('analysis-result');
                
                this.initEventListeners();
            }
            
            initEventListeners() {
                // æ‹ç…§é€‰é¡¹ç‚¹å‡»
                this.cameraOption.addEventListener('click', () => {
                    alert('åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæ­¤åŠŸèƒ½å°†è°ƒç”¨æ‘„åƒå¤´æ‹ç…§ã€‚åœ¨æ¡Œé¢è®¾å¤‡ä¸Šï¼Œè¯·ä½¿ç”¨ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½ã€‚');
                });
                
                // ä¸Šä¼ é€‰é¡¹ç‚¹å‡»
                this.uploadOption.addEventListener('click', () => {
                    this.imageInput.click();
                });
                
                // ä¸Šä¼ åŒºåŸŸç‚¹å‡»
                this.uploadArea.addEventListener('click', () => {
                    this.imageInput.click();
                });
                
                // æ–‡ä»¶é€‰æ‹©å˜åŒ–
                this.imageInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        this.displayImagePreview(file);
                    }
                });
                
                // æ‹–æ”¾åŠŸèƒ½
                this.uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    this.uploadArea.style.borderColor = 'var(--primary-color)';
                    this.uploadArea.style.backgroundColor = '#f9f9f9';
                });
                
                this.uploadArea.addEventListener('dragleave', () => {
                    this.uploadArea.style.borderColor = '#ddd';
                    this.uploadArea.style.backgroundColor = 'white';
                });
                
                this.uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    this.uploadArea.style.borderColor = '#ddd';
                    this.uploadArea.style.backgroundColor = 'white';
                    
                    const file = e.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        this.displayImagePreview(file);
                    } else {
                        alert('è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼');
                    }
                });
                
                // åˆ†ææŒ‰é’®ç‚¹å‡»
                this.analyzeBtn.addEventListener('click', () => {
                    this.performAnalysis();
                });
            }
            
            displayImagePreview(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.imagePreview.src = e.target.result;
                    this.imagePreview.style.display = 'block';
                    this.analyzeBtn.style.display = 'block';
                    this.analysisResult.style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
            
            performAnalysis() {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                this.analyzeBtn.textContent = 'åˆ†æä¸­...';
                this.analyzeBtn.disabled = true;
                
                // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
                setTimeout(() => {
                    this.analyzeBtn.textContent = 'å¼€å§‹åˆ†æ';
                    this.analyzeBtn.disabled = false;
                    this.analysisResult.style.display = 'block';
                    
                    // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                    this.analysisResult.scrollIntoView({ behavior: 'smooth' });
                }, 2000);
            }
        }

        // åº”ç”¨åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const userManager = new UserManager();
            const pageManager = new PageManager();
            const chatManager = new ChatManager();
            const modalManager = new ModalManager();
            const rescueAdoptionManager = new RescueAdoptionManager();
            const aiDiseaseManager = new AIDiseaseManager();
            
            // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œç›´æ¥æ˜¾ç¤ºé¦–é¡µ
            if (userManager.currentUser) {
                showHomePage(userManager.currentUser);
            }
            
            // ç™»å½•æŒ‰é’®äº‹ä»¶
            document.getElementById('login-btn').addEventListener('click', function() {
                const username = document.getElementById('login-username').value;
                const password = document.getElementById('login-password').value;
                
                if (!username || !password) {
                    alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');
                    return;
                }
                
                const result = userManager.login(username, password);
                
                if (result.success) {
                    showHomePage(result.user);
                } else {
                    alert(result.message);
                }
            });
            
            // æ³¨å†ŒæŒ‰é’®äº‹ä»¶
            document.getElementById('register-btn').addEventListener('click', function() {
                pageManager.showPage('register-page');
            });
            
            // è¿”å›ç™»å½•æŒ‰é’®äº‹ä»¶
            document.getElementById('back-to-login-btn').addEventListener('click', function() {
                pageManager.showPage('login-page');
            });
            
            // å®Œæˆæ³¨å†ŒæŒ‰é’®äº‹ä»¶
            document.getElementById('complete-register-btn').addEventListener('click', function() {
                const username = document.getElementById('reg-username').value;
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                const confirmPassword = document.getElementById('reg-confirm-password').value;
                
                if (!username || !email || !password || !confirmPassword) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
                    return;
                }
                
                if (password !== confirmPassword) {
                    alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                    return;
                }
                
                const result = userManager.register(username, email, password);
                
                if (result.success) {
                    alert(result.message);
                    pageManager.showPage('login-page');
                    
                    // æ¸…ç©ºæ³¨å†Œè¡¨å•
                    document.getElementById('reg-username').value = '';
                    document.getElementById('reg-email').value = '';
                    document.getElementById('reg-password').value = '';
                    document.getElementById('reg-confirm-password').value = '';
                } else {
                    alert(result.message);
                }
            });
            
            // ç®¡ç†å‘˜å…¥å£äº‹ä»¶
            document.getElementById('admin-link').addEventListener('click', function(e) {
                e.preventDefault();
                pageManager.showPage('admin-auth-page');
            });
            
            // ç®¡ç†å‘˜éªŒè¯æŒ‰é’®äº‹ä»¶
            document.getElementById('admin-login-btn').addEventListener('click', function() {
                const password = document.getElementById('admin-password').value;
                
                if (!password) {
                    alert('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ');
                    return;
                }
                
                const result = userManager.adminLogin(password);
                
                if (result.success) {
                    showAdminPage(userManager);
                } else {
                    alert(result.message);
                }
            });
            
            // ä»ç®¡ç†å‘˜éªŒè¯é¡µé¢è¿”å›ç™»å½•
            document.getElementById('back-to-login-from-auth').addEventListener('click', function() {
                pageManager.showPage('login-page');
            });
            
            // ä»ç®¡ç†å‘˜é¡µé¢è¿”å›ç™»å½•
            document.getElementById('back-to-login-from-admin').addEventListener('click', function() {
                pageManager.showPage('login-page');
            });
            
            // é€€å‡ºç™»å½•æŒ‰é’®äº‹ä»¶
            document.getElementById('logout-btn').addEventListener('click', function() {
                userManager.logout();
                pageManager.showPage('login-page');
            });
            
            // é¦–é¡µçŠ¶æ€å¡ç‰‡ç‚¹å‡»äº‹ä»¶
            document.getElementById('status-card').addEventListener('click', function() {
                modalManager.showModal('å¥åº·æ•°æ®ç»Ÿè®¡åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†æä¾›æ›´è¯¦ç»†çš„å¡è·¯é‡Œã€ç¡çœ å’Œäº²å¯†å€¼åˆ†æã€‚');
            });
            
            // ä¸ªäººä¸­å¿ƒç»Ÿè®¡é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.profile-stat').forEach(item => {
                item.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    let text = '';
                    
                    switch(type) {
                        case 'rescue':
                            text = 'æ•‘åŠ©è®°å½•åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†å±•ç¤ºæ‚¨å‚ä¸çš„æ‰€æœ‰æ•‘åŠ©æ´»åŠ¨è®°å½•ã€‚';
                            break;
                        case 'adoption':
                            text = 'é¢†å…»ç”³è¯·åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†å±•ç¤ºæ‚¨çš„é¢†å…»ç”³è¯·çŠ¶æ€å’Œå†å²ã€‚';
                            break;
                        case 'coins':
                            text = 'çŒ«å¸ç³»ç»Ÿæ­£åœ¨å¼€å‘ä¸­ï¼Œå°†ç”¨äºå…‘æ¢å® ç‰©ç”¨å“å’Œæèµ ã€‚';
                            break;
                    }
                    
                    modalManager.showModal(text);
                });
            });
            
            // ä¸ªäººä¸­å¿ƒè®¾ç½®é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.profile-setting').forEach(item => {
                item.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    let text = '';
                    
                    switch(type) {
                        case 'edit':
                            text = 'ä¸ªäººä¿¡æ¯ç¼–è¾‘åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†å…è®¸æ‚¨ä¿®æ”¹ä¸ªäººèµ„æ–™ã€‚';
                            break;
                        case 'notification':
                            text = 'é€šçŸ¥è®¾ç½®åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†å…è®¸æ‚¨è‡ªå®šä¹‰æ¥æ”¶å“ªäº›é€šçŸ¥ã€‚';
                            break;
                    }
                    
                    modalManager.showModal(text);
                });
            });
            
            // æ˜¾ç¤ºé¦–é¡µ
            function showHomePage(user) {
                document.getElementById('username-display').textContent = user.username;
                document.getElementById('profile-username').textContent = user.username;
                document.getElementById('profile-email').textContent = user.email;
                pageManager.showPage('home-page');
            }
            
            // æ˜¾ç¤ºç®¡ç†å‘˜é¡µé¢
            function showAdminPage(userManager) {
                const users = userManager.getAllUsers();
                const activeUsers = userManager.getActiveUsersCount();
                
                document.getElementById('total-users').textContent = users.length;
                document.getElementById('active-users').textContent = activeUsers;
                
                const userList = document.getElementById('user-list');
                userList.innerHTML = '';
                
                users.forEach(user => {
                    const userItem = document.createElement('div');
                    userItem.className = 'user-item';
                    
                    const loginTime = user.lastLogin ? 
                        new Date(user.lastLogin).toLocaleDateString('zh-CN') : 
                        'ä»æœªç™»å½•';
                    
                    userItem.innerHTML = `
                        <div>${user.username}</div>
                        <div style="color: var(--light-text); font-size: 12px;">${loginTime}</div>
                    `;
                    
                    userList.appendChild(userItem);
                });
                
                pageManager.showPage('admin-page');
            }
        });
    </script>
</body>
</html>